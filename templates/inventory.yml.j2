# RCCR Ansible Inventory
# Auto-generated from cluster_config.yml
# DO NOT EDIT MANUALLY - regenerated on each setup run

all:
  children:
    control_nodes:
      hosts:
{% for machine in all_machines if machine.type == 'control' %}
        {{ machine.name }}:
          ansible_host: {{ machine.detected_ip | default(machine.ip) }}
          ansible_user: root
          ansible_ssh_private_key_file: /root/.ssh/id_rsa
          node_role: {{ machine.role }}
          node_type: {{ machine.type }}
          containers: {{ machine.containers | default([]) | to_json }}
{% endfor %}

    target_nodes:
      hosts:
{% for machine in all_machines if machine.type == 'target' %}
        {{ machine.name }}:
          ansible_host: {{ machine.detected_ip | default(machine.ip) }}
          ansible_user: root
          ansible_ssh_private_key_file: /root/.ssh/id_rsa
          node_role: {{ machine.role }}
          node_type: {{ machine.type }}
          containers: {{ machine.containers | default([]) | to_json }}
{% endfor %}

    managers:
      hosts:
{% for machine in all_machines if machine.role == 'manager' %}
        {{ machine.name }}:
{% endfor %}

    workers:
      hosts:
{% for machine in all_machines if machine.role == 'worker' %}
        {{ machine.name }}:
{% endfor %}

  vars:
    ansible_connection: ssh
    ansible_python_interpreter: /usr/bin/python3
    gather_facts: yes
    host_key_checking: false
